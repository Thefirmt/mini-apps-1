<!DOCTYPE html>
<html lang="en">
    <head>
        <title>TIC TAC TOE</title>
        <link rel="stylesheet" type="text/css" href="style.css">
    </head>
    <body>
        <div class="all">
            <script src="build/bundle.js"></script>
            <div id="score-board">x 0  0 o</div>
            <div class="board">
                <div class="row" id="top-row"><span class="blank" id="r1c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="blank" id="r1c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="blank" id="r1c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
                <!-- <div class="divider" id="upper-divide"></div> -->
                <div class="row" id="mid-row"><span class="blank" id="r2c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="blank" id="r2c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="blank" id="r2c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
                <!-- <div class="divider" id="lower-divide"></div> -->
                <div class="row" id="bot-row"><span class="blank" id="r3c1">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="blank" id="r3c2">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="blank" id="r3c3">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
                <button id="reset">reset</button>
                <script type="text/javascript">
                var turns = 1;
                var xWins = 0;
                var oWins = 0;
                var xPicks = [];
                var oPicks = [];
                    var allblanks = document.getElementsByClassName('blank');
                    for (var i = 0; i < allblanks.length; i++) {
                        allblanks[i].onclick = function(event) {
                            if ( turns % 2 === 0) {
                                event.target.innerText = "\xa0\xa0o\xa0\xa0"
                                oPicks.push(event.target.id)
                                if (didWon(oPicks)) {
                                    oWins++
                                    turns = 1
                                    updateScore();
                                }
                                turns++;
                            } else {
                                event.target.innerText = "\xa0\xa0x\xa0\xa0"
                                xPicks.push(event.target.id)
                                if (didWon(xPicks)) {
                                    xWins++
                                    turns = 0
                                    updateScore();
                                }
                                turns++;
                            };
                        };
                    };
                var winningCombos = [['r1c1','r1c2','r1c3'], ['r2c1','r2c2','r2c3'], ['r3c1','r3c2','r3c3'], ['r1c1','r2c2','r3c3'], ['r1c3','r2c2','r3c1'], ['r1c1','r2c1','r3c1'], ['r1c2','r2c2','r3c2'], ['r1c3','r2c3','r3c3']]
                var didWon = (playerArr) => {
                    var endMatch = false
                    for (var i =0; i < winningCombos.length; i++) { //loops each possible win condition
                        var count = 0 //counts how many matches per win condition
                        for (var j = 0; j < winningCombos[i].length; j++) { //checks each position in the win condition against the positions that player claimed
                            if (playerArr.includes (winningCombos[i][j])){
                                count ++
                                if (count === 3) {
                                    endMatch = true
                                }
                            }
                        }
                    }
                    return endMatch;
                }
                var updateScore = () => {
                    document.getElementById('score-board').innerText = `x ${xWins}   ${oWins} o`;
                }
                var resetBoard = () => {
                    xPicks = [];
                    oPicks = [];
                    var resetAll = document.getElementsByClassName('blank');
                    for (var i = 0; i < resetAll.length; i++) {
                        resetAll[i].innerText = '\xa0\xa0\xa0\xa0\xa0';
                        };
                };
                var resButton = document.getElementById('reset');
                resButton.onclick = function() {resetBoard();}
                </script>
            </div>
        </div>
    </body>
</html>

